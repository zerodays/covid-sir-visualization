(this.webpackJsonpsir_visualization=this.webpackJsonpsir_visualization||[]).push([[0],{192:function(e,t,a){"use strict";a.r(t);var n,i=a(0),o=a.n(i),s=a(24),r=a.n(s),c=a(11),l=a(18),d=a(14),h=a(10),j=a(16),p=a(15),b=a(186),u=a(191),m=a(188),v=a(6),x=a(13),O=a(2),f=function(e){Object(j.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).canvasRef=o.a.createRef(),e.countInfectedNeighbours=function(t,a,n){for(var i=e.props,o=i.widthPoints,s=i.heightPoints,r=0,c=n-1;c<n+2;c++)for(var l=a-1;l<a+2;l++)c===a&&l===n||c<0||l<0||c>=s||l>=o||1===t[c][l]&&r++;return r},e.paintRect=function(t,a,n,i){var o=e.props.rectSize;i.fillStyle=e.getColorFromState(n[a][t]),i.fillRect(o*t,o*a,o,o)},e.getNewStateForPoint=function(t,a,n){if(2===t[n][a])return 2;if(1===t[n][a])return Math.random()<e.props.gamma?2:1;var i=e.countInfectedNeighbours(t,a,n);return Math.random()<i*e.props.betta/8?1:0},e.getColorFromState=function(t){var a=e.props,n=a.infectedColor,i=a.susceptibleColor,o=a.removedColor;return 1===t?n:2===t?o:i},e.emptyField=function(){for(var t=e.props,a=t.widthPoints,n=t.heightPoints,i=Array(n),o=0;o<n;o++)i[o]=Array(a).fill(0);return i},e.evolve=function(t,a){for(var n=e.props,i=n.widthPoints,o=n.heightPoints,s=e.emptyField(),r=0,c=0,l=0,d=0;d<o;d++)for(var h=0;h<i;h++){var j=e.getNewStateForPoint(t,h,d);s[d][h]=j,0===j?r++:1===j?c++:2===j&&l++,s[d][h]!==t[d][h]&&e.paintRect(h,d,s,a)}var p=r+c+l;return[s,r/=p,c/=p,l/=p]},e.tick=function(){var t=e.getCanvasContext(),a=(new Date).getTime(),i=e.evolve(n,t),o=Object(l.a)(i,4),s=o[0],r=o[1],c=o[2],d=o[3];return n=s,console.log("time for evolution: ".concat((new Date).getTime()-a," ms")),[r,c,d]},e.addSeed=function(t,a){n[a][t]=1,e.paintRect(t,a,n,e.getCanvasContext())},e.reset=function(){var t=e.props,a=t.widthPoints,i=t.heightPoints,o=t.rectSize;n=e.emptyField(),e.getCanvasContext().clearRect(0,0,a*o,i*o)},e.getCanvasContext=function(){return e.canvasRef.current.getContext("2d")},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){n=this.emptyField()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.widthPoints,n=e.heightPoints,i=e.rectSize,o=e.susceptibleColor;return Object(O.jsx)("div",{className:t.root,style:{width:a*i,height:n*i},children:Object(O.jsx)("canvas",{ref:this.canvasRef,className:t.canvas,style:{backgroundColor:o,transform:"scale(".concat(this.props.zoom,")"),width:a*i,height:n*i},width:a*i,height:n*i})})}}]),a}(i.Component),g=Object(v.a)((function(e){return{root:{position:"relative",overflow:"hidden"},canvas:{position:"absolute"}}}))(f),y=a(187),C=a(26),k=function(e){Object(j.a)(a,e);var t=Object(p.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.classes;return Object(O.jsx)(b.a,{className:e.root,children:Object(O.jsx)(u.a,{p:1,className:e.expandable,children:Object(O.jsxs)(y.a,{container:!0,direction:"row",spacing:1,children:[Object(O.jsx)(y.a,{item:!0,xs:12,children:Object(O.jsx)(m.a,{variant:"subtitle2",children:"Pomo\u010d"})}),Object(O.jsx)(y.a,{item:!0,xs:12,children:Object(O.jsxs)(m.a,{variant:"caption",children:["Preprosta simulacija lokalnega (epidemiolo\u0161kega) ",Object(O.jsx)("a",{href:"https://en.m.wikipedia.org/wiki/Compartmental_models_in_epidemiology#The_SIR_model",children:"SIR modela"}),"."]})}),Object(O.jsxs)(y.a,{item:!0,xs:12,children:[Object(O.jsx)(m.a,{variant:"subtitle2",children:"Navigacija"}),Object(O.jsx)(m.a,{variant:"caption",children:Object(O.jsxs)("ul",{children:[Object(O.jsxs)("li",{children:["Pritisnite tipko ",Object(O.jsx)("span",{className:e.key,children:"Enter"})," za simulacijo prehoda na naslednji dan. Prvi oku\u017eeni posameznik se bo pokazal na sredini zaslona na ",Object(O.jsx)("b",{children:"1. dan"}),"."]}),Object(O.jsxs)("li",{children:["Uporabite kolesce na mi\u0161ki (",Object(O.jsx)("span",{className:e.key,children:"scroll"}),") za pove\u010danje ali pomanj\u0161anje vidnega polja."]}),Object(O.jsxs)("li",{children:["Parametre simulacije lahko upravljate s ",Object(O.jsx)("b",{children:"kontrolno plo\u0161\u010do na desni strani zaslona"}),"."]}),Object(O.jsxs)("li",{children:["Podatki na grafu ",Object(O.jsx)("b",{children:"spodaj levo"})," se posodobijo vsakih 21 dni simulacije."]})]})})]}),Object(O.jsx)(y.a,{item:!0,xs:12,children:Object(O.jsx)(m.a,{variant:"subtitle2",children:"Legenda"})}),Object(O.jsx)(y.a,{item:!0,xs:12,children:Object(O.jsxs)(m.a,{variant:"caption",children:[Object(O.jsx)("span",{className:e.legend,style:{backgroundColor:this.props.susceptibleColor}}),"S (susceptible) - dovzetni posamezniki."]})}),Object(O.jsx)(y.a,{item:!0,xs:12,children:Object(O.jsxs)(m.a,{variant:"caption",children:[Object(O.jsx)("span",{className:e.legend,style:{backgroundColor:this.props.infectedColor}}),"I (infected) - oku\u017eeni posamezniki."]})}),Object(O.jsx)(y.a,{item:!0,xs:12,children:Object(O.jsxs)(m.a,{variant:"caption",children:[Object(O.jsx)("span",{className:e.legend,style:{backgroundColor:this.props.removedColor}}),"R (recovered) - odstranjeni oz. imuni posamezniki."]})})]})})})}}]),a}(i.Component),S=Object(v.a)((function(e){return{root:{maxWidth:360},key:{backgroundColor:C.a[300],borderRadius:2,borderWidth:2,borderColor:C.a[300],borderStyle:"solid",paddingX:8,paddingY:2},expandable:{maxHeight:20,transition:"max-height 300ms ease-out","&:hover":{maxHeight:512}},legend:{width:12,height:12,borderColor:C.a[700],borderWidth:1,borderStyle:"solid",borderRadius:2,display:"inline-block",marginRight:6}}}))(k),w=a(193),z=a(189),R=function(e){Object(j.a)(a,e);var t=Object(p.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return Object(O.jsx)(b.a,{className:t.root,children:Object(O.jsx)(u.a,{p:1,children:Object(O.jsxs)(y.a,{container:!0,direction:"row",justify:"center",spacing:1,children:[Object(O.jsx)(y.a,{item:!0,xs:12,children:Object(O.jsxs)(m.a,{variant:"subtitle2",children:["Nadzorna plo\u0161\u010da ",Object(O.jsxs)("span",{className:t.day,children:["Dan ",this.props.day]})]})}),Object(O.jsx)(y.a,{item:!0,xs:12}),Object(O.jsxs)(y.a,{item:!0,xs:12,children:[Object(O.jsxs)(m.a,{variant:"body2",children:["\u03b2 ",Object(O.jsx)("small",{children:" - verjetnost, da se posameznik oku\u017ei po enodnevnem kontaku z oku\u017eenim"})]}),Object(O.jsx)(u.a,{pt:4,children:Object(O.jsx)(w.a,{value:this.props.betta,min:0,max:1,step:.01,onChange:function(t,a){return e.props.onChangeBetta(a)},valueLabelDisplay:"on"})})]}),Object(O.jsx)(y.a,{item:!0,xs:12}),Object(O.jsxs)(y.a,{item:!0,xs:12,children:[Object(O.jsxs)(m.a,{variant:"body2",children:["\u03b3 ",Object(O.jsx)("small",{children:" - verjetnost, da posameznik na dolo\u010den dan ozdravi"})]}),Object(O.jsx)(u.a,{pt:4,children:Object(O.jsx)(w.a,{value:this.props.gamma,min:0,max:1,step:.01,onChange:function(t,a){return e.props.onChangeGamma(a)},valueLabelDisplay:"on"})})]}),Object(O.jsx)(y.a,{item:!0,xs:12}),Object(O.jsx)(y.a,{item:!0,children:Object(O.jsx)(z.a,{size:"small",variant:"raised",onClick:this.props.onReset,color:"secondary",children:"Ponastavi simulacijo"})})]})})})}}]),a}(i.Component),P=Object(v.a)((function(e){return{root:{width:256},day:{float:"right"}}}))(R),N=a(168),I=a.n(N),M={colors:[x.a.grey[500],x.a.red[400],x.a.blue[400]],title:{text:"SIR vrednosti (osve\u017eene vsakih 21 dni)"},animations:{enabled:!1},chart:{type:"area"},dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{type:"number",tickAmount:8,labels:{formatter:function(e){return"Dan ".concat(21*e)}}},yaxis:{labels:{formatter:function(e){return"".concat(Math.round(100*e)," %")}}},tooltip:{title:"Dan"},markers:{size:0}},W=function(e){Object(j.a)(a,e);var t=Object(p.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return Object(O.jsx)(b.a,{children:Object(O.jsx)(u.a,{pr:2,pt:2,children:Object(O.jsx)(I.a,{width:512,options:M,series:[{name:"S - dovzetni",data:this.props.dataS},{name:"I - oku\u017eeni",data:this.props.dataI},{name:"R - imuni",data:this.props.dataR}]})})})}}]),a}(i.Component),D=Object(v.a)({})(W),B=x.a.grey[200],F=x.a.red[400],_=x.a.blue[400],L=function(e){Object(j.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).fieldRef=o.a.createRef(),e.state={seedCalled:!1,day:0,zoom:1,widthPoints:null,heightPoints:null,betta:.8,gamma:.2,dataS:[],dataI:[],dataR:[]},e.iterateWithSeed=function(t){if(13===t.keyCode){var a=e.fieldRef.current;if(!e.state.seedCalled){var n=document.body.clientWidth,i=document.body.clientHeight,o=Math.ceil(n/3/2),s=Math.ceil(i/3/2);a.addSeed(o,s),e.setState({seedCalled:!0})}var r=a.tick(),d=Object(l.a)(r,3),h=d[0],j=d[1],p=d[2];e.state.day%21===0?e.setState((function(e){return{day:e.day+1,dataS:[].concat(Object(c.a)(e.dataS),[h]),dataI:[].concat(Object(c.a)(e.dataI),[j]),dataR:[].concat(Object(c.a)(e.dataR),[p])}})):e.setState((function(e){return{day:e.day+1}}))}},e.onScroll=function(t){var a=e.state.zoom-t.deltaY/100;a=Math.min(3,Math.max(1,a)),e.setState({zoom:a})},e.onChangeBetta=function(t){return e.setState({betta:t})},e.onChangeGamma=function(t){return e.setState({gamma:t})},e.onReset=function(){e.setState({seedCalled:!1,day:0,dataS:[],dataI:[],dataR:[]},e.fieldRef.current.reset)},e.getMadeByWidget=function(){var t=e.props.classes;return Object(O.jsx)("div",{className:t.madeByRoot,children:Object(O.jsx)(b.a,{children:Object(O.jsx)(u.a,{px:2,py:1,children:Object(O.jsxs)(m.a,{style:{fontSize:14},children:["Vizualizacijo lokalnega SIR modela je za izobra\u017eevalne namene ustvarila ekipa ",Object(O.jsx)("a",{rel:"noopener noreferrer",target:"_blank",href:"https://zerodays.dev",children:"Zerodays"}),"."]})})})})},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.iterateWithSeed);var e=document.body.clientWidth,t=document.body.clientHeight,a=Math.ceil(e/3),n=Math.ceil(t/3);this.setState({widthPoints:a,heightPoints:n})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.iterateWithSeed)}},{key:"render",value:function(){var e=this.props.classes;return Object(O.jsxs)("div",{className:e.root,onKeyDown:this.iterateWithSeed,onWheel:this.onScroll,children:[Object(O.jsx)("div",{className:e.fieldContainer,children:null==this.state.widthPoints?null:Object(O.jsx)(g,{ref:this.fieldRef,widthPoints:this.state.widthPoints,heightPoints:this.state.heightPoints,rectSize:3,susceptibleColor:B,infectedColor:F,removedColor:_,betta:this.state.betta,gamma:this.state.gamma,zoom:this.state.zoom})}),Object(O.jsx)("div",{className:e.helpCardContainer,children:Object(O.jsx)(S,{susceptibleColor:B,infectedColor:F,removedColor:_})}),Object(O.jsx)("div",{className:e.controlPanelContainer,children:Object(O.jsx)(P,{betta:this.state.betta,gamma:this.state.gamma,day:this.state.day,onChangeBetta:this.onChangeBetta,onChangeGamma:this.onChangeGamma,onReset:this.onReset})}),Object(O.jsx)("div",{className:e.chartViewContainer,children:Object(O.jsx)(D,{dataS:this.state.dataS,dataI:this.state.dataI,dataR:this.state.dataR})}),this.getMadeByWidget()]})}}]),a}(i.Component),A=Object(v.a)((function(e){return{root:{overflow:"hidden",height:"100vh",width:"100vw",position:"relative"},fieldContainer:{position:"absolute",top:0,left:0},helpCardContainer:{position:"absolute",top:16,left:16,opacity:.6,transition:"opacity 200ms ease-in-out","&:hover":{opacity:1}},controlPanelContainer:{position:"absolute",right:16,top:16,opacity:.6,transition:"opacity 200ms ease-in-out","&:hover":{opacity:1}},chartViewContainer:{position:"absolute",left:16,bottom:16,opacity:.6,transition:"opacity 200ms ease-in-out","&:hover":{opacity:1}},madeByRoot:{position:"absolute",right:16,bottom:16,opacity:.6,maxWidth:380,transition:"opacity 200ms ease-in-out","&:hover":{opacity:1}}}}))(L);r.a.render(Object(O.jsx)(o.a.StrictMode,{children:Object(O.jsx)(A,{})}),document.getElementById("root"))}},[[192,1,2]]]);
//# sourceMappingURL=main.486cbb60.chunk.js.map